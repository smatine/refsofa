{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _comparison = require('../comparison');\n\nvar Comparator = _interopRequireWildcard(_comparison);\n\nvar _const = require('../const');\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/* eslint jsx-a11y/no-static-element-interactions: 0 */\n\n/* eslint react/require-default-props: 0 */\n\n/* eslint no-return-assign: 0 */\n\n\nvar legalComparators = [Comparator.EQ, Comparator.NE, Comparator.GT, Comparator.GE, Comparator.LT, Comparator.LE];\n\nvar NumberFilter = function (_Component) {\n  _inherits(NumberFilter, _Component);\n\n  function NumberFilter(props) {\n    _classCallCheck(this, NumberFilter);\n\n    var _this = _possibleConstructorReturn(this, (NumberFilter.__proto__ || Object.getPrototypeOf(NumberFilter)).call(this, props));\n\n    _this.comparators = props.comparators || legalComparators;\n    _this.timeout = null;\n    var isSelected = props.defaultValue !== undefined && props.defaultValue.number !== undefined;\n\n    if (props.options && isSelected) {\n      isSelected = props.options.indexOf(props.defaultValue.number) > -1;\n    }\n\n    _this.state = {\n      isSelected: isSelected\n    };\n    _this.onChangeNumber = _this.onChangeNumber.bind(_this);\n    _this.onChangeNumberSet = _this.onChangeNumberSet.bind(_this);\n    _this.onChangeComparator = _this.onChangeComparator.bind(_this);\n    return _this;\n  }\n\n  _createClass(NumberFilter, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var _props = this.props,\n          column = _props.column,\n          onFilter = _props.onFilter,\n          getFilter = _props.getFilter;\n      var comparator = this.numberFilterComparator.value;\n      var number = this.numberFilter.value;\n\n      if (comparator && number) {\n        onFilter(column, _const.FILTER_TYPE.NUMBER, true)({\n          number: number,\n          comparator: comparator\n        });\n      } // export onFilter function to allow users to access\n\n\n      if (getFilter) {\n        getFilter(function (filterVal) {\n          _this2.setState(function () {\n            return {\n              isSelected: filterVal !== ''\n            };\n          });\n\n          _this2.numberFilterComparator.value = filterVal.comparator;\n          _this2.numberFilter.value = filterVal.number;\n          onFilter(column, _const.FILTER_TYPE.NUMBER)({\n            number: filterVal.number,\n            comparator: filterVal.comparator\n          });\n        });\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      clearTimeout(this.timeout);\n    }\n  }, {\n    key: 'onChangeNumber',\n    value: function onChangeNumber(e) {\n      var _props2 = this.props,\n          delay = _props2.delay,\n          column = _props2.column,\n          onFilter = _props2.onFilter;\n      var comparator = this.numberFilterComparator.value;\n\n      if (comparator === '') {\n        return;\n      }\n\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n      }\n\n      var filterValue = e.target.value;\n      this.timeout = setTimeout(function () {\n        onFilter(column, _const.FILTER_TYPE.NUMBER)({\n          number: filterValue,\n          comparator: comparator\n        });\n      }, delay);\n    }\n  }, {\n    key: 'onChangeNumberSet',\n    value: function onChangeNumberSet(e) {\n      var _props3 = this.props,\n          column = _props3.column,\n          onFilter = _props3.onFilter;\n      var comparator = this.numberFilterComparator.value;\n      var value = e.target.value;\n      this.setState(function () {\n        return {\n          isSelected: value !== ''\n        };\n      }); // if (comparator === '') {\n      //   return;\n      // }\n\n      onFilter(column, _const.FILTER_TYPE.NUMBER)({\n        number: value,\n        comparator: comparator\n      });\n    }\n  }, {\n    key: 'onChangeComparator',\n    value: function onChangeComparator(e) {\n      var _props4 = this.props,\n          column = _props4.column,\n          onFilter = _props4.onFilter;\n      var value = this.numberFilter.value;\n      var comparator = e.target.value; // if (value === '') {\n      //   return;\n      // }\n\n      onFilter(column, _const.FILTER_TYPE.NUMBER)({\n        number: value,\n        comparator: comparator\n      });\n    }\n  }, {\n    key: 'getComparatorOptions',\n    value: function getComparatorOptions() {\n      var optionTags = [];\n      var withoutEmptyComparatorOption = this.props.withoutEmptyComparatorOption;\n\n      if (!withoutEmptyComparatorOption) {\n        optionTags.push(_react2.default.createElement('option', {\n          key: '-1'\n        }));\n      }\n\n      for (var i = 0; i < this.comparators.length; i += 1) {\n        optionTags.push(_react2.default.createElement('option', {\n          key: i,\n          value: this.comparators[i]\n        }, this.comparators[i]));\n      }\n\n      return optionTags;\n    }\n  }, {\n    key: 'getNumberOptions',\n    value: function getNumberOptions() {\n      var optionTags = [];\n      var _props5 = this.props,\n          options = _props5.options,\n          column = _props5.column,\n          withoutEmptyNumberOption = _props5.withoutEmptyNumberOption;\n\n      if (!withoutEmptyNumberOption) {\n        optionTags.push(_react2.default.createElement('option', {\n          key: '-1',\n          value: ''\n        }, this.props.placeholder || 'Select ' + column.text + '...'));\n      }\n\n      for (var i = 0; i < options.length; i += 1) {\n        optionTags.push(_react2.default.createElement('option', {\n          key: i,\n          value: options[i]\n        }, options[i]));\n      }\n\n      return optionTags;\n    }\n  }, {\n    key: 'applyFilter',\n    value: function applyFilter(filterObj) {\n      var _props6 = this.props,\n          column = _props6.column,\n          onFilter = _props6.onFilter;\n      var number = filterObj.number,\n          comparator = filterObj.comparator;\n      this.setState(function () {\n        return {\n          isSelected: number !== ''\n        };\n      });\n      this.numberFilterComparator.value = comparator;\n      this.numberFilter.value = number;\n      onFilter(column, _const.FILTER_TYPE.NUMBER)({\n        number: number,\n        comparator: comparator\n      });\n    }\n  }, {\n    key: 'cleanFiltered',\n    value: function cleanFiltered() {\n      var _props7 = this.props,\n          column = _props7.column,\n          onFilter = _props7.onFilter,\n          defaultValue = _props7.defaultValue;\n      var value = defaultValue ? defaultValue.number : '';\n      var comparator = defaultValue ? defaultValue.comparator : '';\n      this.setState(function () {\n        return {\n          isSelected: value !== ''\n        };\n      });\n      this.numberFilterComparator.value = comparator;\n      this.numberFilter.value = value;\n      onFilter(column, _const.FILTER_TYPE.NUMBER)({\n        number: value,\n        comparator: comparator\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this3 = this;\n\n      var isSelected = this.state.isSelected;\n      var _props8 = this.props,\n          defaultValue = _props8.defaultValue,\n          column = _props8.column,\n          options = _props8.options,\n          style = _props8.style,\n          className = _props8.className,\n          numberStyle = _props8.numberStyle,\n          numberClassName = _props8.numberClassName,\n          comparatorStyle = _props8.comparatorStyle,\n          comparatorClassName = _props8.comparatorClassName,\n          placeholder = _props8.placeholder;\n      var selectClass = '\\n      select-filter \\n      number-filter-input \\n      form-control \\n      ' + numberClassName + ' \\n      ' + (!isSelected ? 'placeholder-selected' : '') + '\\n    ';\n      return _react2.default.createElement('div', {\n        onClick: function onClick(e) {\n          return e.stopPropagation();\n        },\n        className: 'filter number-filter ' + className,\n        style: style\n      }, _react2.default.createElement('select', {\n        ref: function ref(n) {\n          return _this3.numberFilterComparator = n;\n        },\n        style: comparatorStyle,\n        className: 'number-filter-comparator form-control ' + comparatorClassName,\n        onChange: this.onChangeComparator,\n        defaultValue: defaultValue ? defaultValue.comparator : ''\n      }, this.getComparatorOptions()), options ? _react2.default.createElement('select', {\n        ref: function ref(n) {\n          return _this3.numberFilter = n;\n        },\n        style: numberStyle,\n        className: selectClass,\n        onChange: this.onChangeNumberSet,\n        defaultValue: defaultValue ? defaultValue.number : ''\n      }, this.getNumberOptions()) : _react2.default.createElement('input', {\n        ref: function ref(n) {\n          return _this3.numberFilter = n;\n        },\n        type: 'number',\n        style: numberStyle,\n        className: 'number-filter-input form-control ' + numberClassName,\n        placeholder: placeholder || 'Enter ' + column.text + '...',\n        onChange: this.onChangeNumber,\n        defaultValue: defaultValue ? defaultValue.number : ''\n      }));\n    }\n  }]);\n\n  return NumberFilter;\n}(_react.Component);\n\nNumberFilter.propTypes = {\n  onFilter: _propTypes2.default.func.isRequired,\n  column: _propTypes2.default.object.isRequired,\n  options: _propTypes2.default.arrayOf(_propTypes2.default.number),\n  defaultValue: _propTypes2.default.shape({\n    number: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n    comparator: _propTypes2.default.oneOf([].concat(legalComparators, ['']))\n  }),\n  delay: _propTypes2.default.number,\n\n  /* eslint consistent-return: 0 */\n  comparators: function comparators(props, propName) {\n    if (!props[propName]) {\n      return;\n    }\n\n    for (var i = 0; i < props[propName].length; i += 1) {\n      var comparatorIsValid = false;\n\n      for (var j = 0; j < legalComparators.length; j += 1) {\n        if (legalComparators[j] === props[propName][i] || props[propName][i] === '') {\n          comparatorIsValid = true;\n          break;\n        }\n      }\n\n      if (!comparatorIsValid) {\n        return new Error('Number comparator provided is not supported.\\n          Use only ' + legalComparators);\n      }\n    }\n  },\n  placeholder: _propTypes2.default.string,\n  withoutEmptyComparatorOption: _propTypes2.default.bool,\n  withoutEmptyNumberOption: _propTypes2.default.bool,\n  style: _propTypes2.default.object,\n  className: _propTypes2.default.string,\n  comparatorStyle: _propTypes2.default.object,\n  comparatorClassName: _propTypes2.default.string,\n  numberStyle: _propTypes2.default.object,\n  numberClassName: _propTypes2.default.string,\n  getFilter: _propTypes2.default.func\n};\nNumberFilter.defaultProps = {\n  delay: _const.FILTER_DELAY,\n  options: undefined,\n  defaultValue: {\n    number: undefined,\n    comparator: ''\n  },\n  withoutEmptyComparatorOption: false,\n  withoutEmptyNumberOption: false,\n  comparators: legalComparators,\n  placeholder: undefined,\n  style: undefined,\n  className: '',\n  comparatorStyle: undefined,\n  comparatorClassName: '',\n  numberStyle: undefined,\n  numberClassName: ''\n};\nexports.default = NumberFilter;","map":null,"metadata":{},"sourceType":"script"}