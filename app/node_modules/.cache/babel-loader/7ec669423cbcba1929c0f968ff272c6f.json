{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\ref\\\\referentiel\\\\app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\ref\\\\referentiel\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:\\\\ref\\\\referentiel\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\ref\\\\referentiel\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\ref\\\\referentiel\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\ref\\\\referentiel\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\ref\\\\referentiel\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\ref\\\\referentiel\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\ref\\\\referentiel\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\ref\\\\referentiel\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\ref\\\\referentiel\\\\app\\\\src\\\\RuleEdit.js\";\nimport React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { Button, Container, Form, FormGroup, Input, Label, FormFeedback } from 'reactstrap';\nimport AppNavbar from './AppNavbar';\nimport { API_BASE_URL, FRT_BASE_URL } from './constants';\n\nvar cidrRegex = require('cidr-regex');\n\nvar RuleEdit =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RuleEdit, _Component);\n\n  function RuleEdit(props) {\n    var _this;\n\n    _classCallCheck(this, RuleEdit);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RuleEdit).call(this, props));\n    _this.emptyItem = {\n      type: '',\n      number: '',\n      ruleType: '',\n      protocol: '',\n      portRange: '',\n      cidr: '',\n      allow: '',\n      text: '',\n      nacl: {},\n      touched: {\n        type: false,\n        number: false,\n        ruleType: false,\n        protocol: false,\n        portRange: false,\n        cidr: false,\n        allow: false\n      }\n    };\n\n    _this.handleBlur = function (field) {\n      return function (evt) {\n        var item = _objectSpread({}, _this.state.item);\n\n        item.touched = _objectSpread({}, _this.state.item.touched, _defineProperty({}, field, true));\n\n        _this.setState({\n          item: item\n        });\n      };\n    };\n\n    _this.state = {\n      item: _this.emptyItem\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleBlur = _this.handleBlur.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(RuleEdit, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var rule, nacl, _rule;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(this.props.match.params.id !== 'new')) {\n                  _context.next = 10;\n                  break;\n                }\n\n                _context.next = 3;\n                return fetch(\"\".concat(API_BASE_URL, \"/rules/\").concat(this.props.match.params.id));\n\n              case 3:\n                _context.next = 5;\n                return _context.sent.json();\n\n              case 5:\n                rule = _context.sent;\n                rule.touched = {\n                  type: false,\n                  number: false,\n                  ruleType: false,\n                  protocol: false,\n                  portRange: false,\n                  cidr: false,\n                  allow: false\n                };\n                this.setState({\n                  item: rule\n                });\n                _context.next = 19;\n                break;\n\n              case 10:\n                _context.next = 12;\n                return fetch(\"\".concat(API_BASE_URL, \"/nacls/\").concat(this.props.match.params.idn));\n\n              case 12:\n                _context.next = 14;\n                return _context.sent.json();\n\n              case 14:\n                nacl = _context.sent;\n                _rule = {\n                  number: '',\n                  ruleType: '',\n                  protocol: '',\n                  portRange: '',\n                  cidr: '',\n                  allow: '',\n                  type: '',\n                  text: '',\n                  nacl: {},\n                  touched: {\n                    type: false,\n                    number: false,\n                    ruleType: false,\n                    protocol: false,\n                    portRange: false,\n                    cidr: false,\n                    allow: false\n                  }\n                };\n                _rule.nacl = nacl;\n                _rule.touched = {\n                  type: false,\n                  number: false,\n                  ruleType: false,\n                  protocol: false,\n                  portRange: false,\n                  cidr: false,\n                  allow: false\n                };\n                this.setState({\n                  item: _rule\n                });\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      var target = event.target;\n      var value = target.value;\n      var name = target.name;\n\n      var item = _objectSpread({}, this.state.item);\n\n      item[name] = value;\n      this.setState({\n        item: item\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function () {\n      var _handleSubmit = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(event) {\n        var item, errors, isDisabled, hist;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                event.preventDefault();\n                item = this.state.item;\n                item.touched = {\n                  type: true,\n                  number: true,\n                  ruleType: true,\n                  protocol: true,\n                  portRange: true,\n                  cidr: true,\n                  allow: true\n                };\n                errors = this.validate(item.type, item.number, item.ruleType, item.protocol, item.portRange, item.cidr, item.allow);\n                isDisabled = Object.keys(errors).some(function (x) {\n                  return errors[x];\n                });\n\n                if (!isDisabled) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                this.forceUpdate();\n                return _context2.abrupt(\"return\");\n\n              case 8:\n                hist = FRT_BASE_URL + '/nacl/' + item.nacl.id + '/rules';\n                item.nacl = {\n                  id: item.nacl.id\n                }; //console.log(\"sma\" + item.subnetgroupId);\n                //return;\n\n                _context2.next = 12;\n                return fetch(item.id ? API_BASE_URL + '/nacls/' + item.nacl.id + '/rules/' + item.id : API_BASE_URL + '/nacls/' + item.nacl.id + '/rules', {\n                  method: item.id ? 'PUT' : 'POST',\n                  headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                  },\n                  body: JSON.stringify(item)\n                });\n\n              case 12:\n                this.props.history.push(hist);\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function handleSubmit(_x) {\n        return _handleSubmit.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"validate\",\n    value: function validate(type, number, ruleType, protocol, portRange, cidr, allow) {\n      var errors = {\n        type: '',\n        number: '',\n        ruleType: '',\n        protocol: '',\n        portRange: '',\n        cidr: '',\n        allow: ''\n      }; //console.log('type' + type);\n\n      if (this.state.item.touched.type && type.length === 0) {\n        errors.type = 'Type should not be null';\n        return errors;\n      } else if (this.state.item.touched.number && number.length === 0) {\n        errors.number = 'Rule should not be null';\n        return errors;\n      } else if (this.state.item.touched.ruleType && ruleType.length === 0) {\n        errors.ruleType = 'Type should not be null';\n        return errors;\n      } else if (this.state.item.touched.protocol && protocol.length === 0) {\n        errors.protocol = 'Protocol should not be null';\n        return errors;\n      } else if (this.state.item.touched.portRange && portRange.length === 0) {\n        errors.portRange = 'Portrange should not be null';\n        return errors;\n      } else if (this.state.item.touched.cidr && !cidrRegex({\n        exact: true\n      }).test(cidr)) {\n        errors.cidr = 'Cidr should  be a cidr format';\n        return errors;\n      } else if (this.state.item.touched.allow && allow.length === 0) {\n        errors.allow = 'Deny/Allow should not be null';\n        return errors;\n      }\n\n      return errors;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var item = this.state.item;\n      var title = React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, item.id ? 'Edit rule' : 'Add rule');\n      var errors = this.validate(item.type, item.number, item.ruleType, item.protocol, item.portRange, item.cidr, item.allow);\n      var isDisabled = Object.keys(errors).some(function (x) {\n        return errors[x];\n      });\n      var canc = FRT_BASE_URL + \"/nacl/\" + item.nacl.id + \"/rules\";\n      var nacl = null;\n      nacl = React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"naclId\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, \"Nacl: \", item.nacl.name), React.createElement(Input, {\n        type: \"text\",\n        name: \"naclId\",\n        id: \"naclId\",\n        value: item.nacl.id || '',\n        disabled: \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }));\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(AppNavbar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }), React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, title, React.createElement(Form, {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"type\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, \"In/Out (*)\"), React.createElement(Input, {\n        type: \"select\",\n        name: \"type\",\n        id: \"type\",\n        value: item.type || '',\n        onChange: this.handleChange,\n        onBlur: this.handleBlur('type'),\n        valid: errors.type === '',\n        invalid: errors.type !== '',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, \"Choose\"), React.createElement(\"option\", {\n        value: \"INBOUND\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, \"INBOUND\"), React.createElement(\"option\", {\n        value: \"OUTBOUND\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, \"OUTBOUND\")), React.createElement(FormFeedback, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, errors.type)), nacl, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"number\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, \"Rule (*)\"), React.createElement(Input, {\n        type: \"text\",\n        name: \"number\",\n        id: \"number\",\n        value: item.number || '',\n        placeholder: \"Enter rule\",\n        onChange: this.handleChange,\n        onBlur: this.handleBlur('number'),\n        autoComplete: \"number\",\n        valid: errors.number === '',\n        invalid: errors.number !== '',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }), React.createElement(FormFeedback, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, errors.number)), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"ruleType\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, \"Type (*)\"), React.createElement(Input, {\n        type: \"select\",\n        name: \"ruleType\",\n        id: \"ruleType\",\n        value: item.ruleType || '',\n        onChange: this.handleChange,\n        onBlur: this.handleBlur('ruleType'),\n        valid: errors.ruleType === '',\n        invalid: errors.ruleType !== '',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, \"Choose\"), React.createElement(\"option\", {\n        value: \"ruleType1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, \"ruleType1\"), React.createElement(\"option\", {\n        value: \"ruleType2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, \"ruleType2\")), React.createElement(FormFeedback, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, errors.ruleType)), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"protocol\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, \"Protocol (*)\"), React.createElement(Input, {\n        type: \"select\",\n        name: \"protocol\",\n        id: \"protocol\",\n        value: item.protocol || '',\n        onChange: this.handleChange,\n        onBlur: this.handleBlur('protocol'),\n        valid: errors.protocol === '',\n        invalid: errors.protocol !== '',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, \"Choose\"), React.createElement(\"option\", {\n        value: \"protocol1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, \"protocol1\"), React.createElement(\"option\", {\n        value: \"protocol2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, \"protocol2\")), React.createElement(FormFeedback, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, errors.protocol)), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"portRange\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, \"Port Range (*)\"), React.createElement(Input, {\n        type: \"text\",\n        name: \"portRange\",\n        id: \"portRange\",\n        value: item.portRange || '',\n        placeholder: \"Enter portRange\",\n        onChange: this.handleChange,\n        onBlur: this.handleBlur('portRange'),\n        autoComplete: \"portRange\",\n        valid: errors.portRange === '',\n        invalid: errors.portRange !== '',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }), React.createElement(FormFeedback, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, errors.portRange)), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"cidr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, \"Source/Destination (*)\"), React.createElement(Input, {\n        type: \"text\",\n        name: \"cidr\",\n        id: \"cidr\",\n        value: item.cidr || '',\n        placeholder: \"Enter cidr\",\n        onChange: this.handleChange,\n        onBlur: this.handleBlur('cidr'),\n        autoComplete: \"cidr\",\n        valid: errors.cidr === '',\n        invalid: errors.cidr !== '',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }), React.createElement(FormFeedback, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, errors.cidr)), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"allow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, \"Deny/Allow (*)\"), React.createElement(Input, {\n        type: \"select\",\n        name: \"allow\",\n        id: \"allow\",\n        value: item.allow || '',\n        onChange: this.handleChange,\n        onBlur: this.handleBlur('allow'),\n        valid: errors.allow === '',\n        invalid: errors.allow !== '',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, \"Choose\"), React.createElement(\"option\", {\n        value: \"Deny\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      }, \"Deny\"), React.createElement(\"option\", {\n        value: \"Allow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      }, \"Allow\")), React.createElement(FormFeedback, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, errors.allow)), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, \"Description\"), React.createElement(Input, {\n        type: \"text\",\n        name: \"text\",\n        id: \"text\",\n        value: item.text || '',\n        onChange: this.handleChange,\n        autoComplete: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }, React.createElement(Button, {\n        color: \"primary\",\n        type: \"submit\",\n        disabled: isDisabled,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, \"Save\"), ' ', React.createElement(Button, {\n        color: \"secondary\",\n        tag: Link,\n        to: canc,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, \"Cancel\")))));\n    }\n  }]);\n\n  return RuleEdit;\n}(Component);\n\nexport default withRouter(RuleEdit);","map":{"version":3,"sources":["C:\\ref\\referentiel\\app\\src\\RuleEdit.js"],"names":["React","Component","Link","withRouter","Button","Container","Form","FormGroup","Input","Label","FormFeedback","AppNavbar","API_BASE_URL","FRT_BASE_URL","cidrRegex","require","RuleEdit","props","emptyItem","type","number","ruleType","protocol","portRange","cidr","allow","text","nacl","touched","handleBlur","field","evt","item","state","setState","handleChange","bind","handleSubmit","match","params","id","fetch","json","rule","idn","event","target","value","name","preventDefault","errors","validate","isDisabled","Object","keys","some","x","forceUpdate","hist","method","headers","body","JSON","stringify","history","push","length","exact","test","title","canc"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport { Button, Container, Form, FormGroup, Input, Label, FormFeedback } from 'reactstrap';\r\nimport AppNavbar from './AppNavbar';\r\nimport { API_BASE_URL, FRT_BASE_URL } from './constants';\r\n\r\nconst cidrRegex = require('cidr-regex');\r\nclass RuleEdit extends Component {\r\n\r\n  emptyItem = {\r\n    type: '',\r\n    number: '', \r\n    ruleType: '', \r\n    protocol:'', \r\n    portRange:'', \r\n    cidr: '',\r\n    allow:'',\r\n    text: '',\r\n    nacl: {},\r\n    touched: {\r\n      type: false,\r\n      number: false, \r\n      ruleType: false, \r\n      protocol: false, \r\n      portRange: false,\r\n      cidr: false,\r\n      allow:false\r\n    }\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      item: this.emptyItem\r\n    };\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleBlur = this.handleBlur.bind(this);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    if (this.props.match.params.id !== 'new') {\r\n      const rule = await (await fetch(`${API_BASE_URL}/rules/${this.props.match.params.id}`)).json();\r\n      rule.touched = {\r\n        type: false,\r\n        number: false, \r\n        ruleType: false, \r\n        protocol: false, \r\n        portRange: false, \r\n        cidr: false,\r\n        allow: false\r\n      };\r\n      this.setState({item: rule});\r\n      \r\n    }\r\n    else {\r\n      const nacl = await (await fetch(`${API_BASE_URL}/nacls/${this.props.match.params.idn}`)).json();\r\n      const rule = {\r\n        number: '', \r\n        ruleType: '', \r\n        protocol:'', \r\n        portRange:'', \r\n        cidr: '',\r\n        allow: '',\r\n        type: '',\r\n        text: '',\r\n        nacl: {},\r\n        touched: {\r\n          type: false,\r\n          number: false, \r\n          ruleType: false, \r\n          protocol: false, \r\n          portRange: false, \r\n          cidr: false,\r\n          allow: false\r\n        }\r\n      };\r\n      rule.nacl = nacl;\r\n      rule.touched = {\r\n          type: false,\r\n          number: false, \r\n          ruleType: false, \r\n          protocol: false, \r\n          portRange: false, \r\n          cidr: false,\r\n          allow: false\r\n      };\r\n      this.setState({item: rule});\r\n    }\r\n\r\n\r\n  }\r\n\r\n  handleChange(event) {\r\n    const target = event.target;\r\n    const value = target.value;\r\n    const name = target.name;\r\n    let item = {...this.state.item};\r\n    item[name] = value;\r\n    this.setState({item});\r\n\r\n  }\r\n\r\n  async handleSubmit(event) {\r\n    event.preventDefault();\r\n    const {item} = this.state;\r\n\r\n    item.touched = {\r\n          type: true,\r\n          number: true, \r\n          ruleType: true, \r\n          protocol: true, \r\n          portRange: true, \r\n          cidr: true,\r\n          allow: true\r\n    };\r\n    const errors = this.validate(item.type, item.number, item.ruleType, item.protocol, item.portRange, item.cidr, item.allow);\r\n    const isDisabled = Object.keys(errors).some(x => errors[x]);\r\n    if(isDisabled) {\r\n        this.forceUpdate();\r\n        return;\r\n    }\r\n    \r\n    \r\n    const hist= FRT_BASE_URL + '/nacl/' + item.nacl.id +'/rules'; \r\n\r\n    item.nacl={id: item.nacl.id};\r\n    \r\n    //console.log(\"sma\" + item.subnetgroupId);\r\n    //return;\r\n\r\n    await fetch((item.id) ? API_BASE_URL + '/nacls/' + (item.nacl.id) + '/rules/'+(item.id) : API_BASE_URL + '/nacls/' + item.nacl.id + '/rules', {\r\n      method: (item.id) ? 'PUT' : 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(item),\r\n    });\r\n    this.props.history.push(hist);\r\n  }\r\n\r\n  handleBlur = (field) => (evt) => {\r\n\r\n    let item = {...this.state.item};\r\n    item.touched= { ...this.state.item.touched, [field]: true};\r\n    this.setState({item});\r\n\r\n  }\r\n\r\n  validate(type, number, ruleType, protocol, portRange, cidr, allow) {\r\n\r\n    const errors = {\r\n      type: '',\r\n      number: '', \r\n      ruleType: '', \r\n      protocol:'', \r\n      portRange:'', \r\n      cidr: '',\r\n      allow: ''\r\n    };\r\n    //console.log('type' + type);\r\n    \r\n    if(this.state.item.touched.type && type.length === 0){\r\n      errors.type = 'Type should not be null';\r\n      return errors;\r\n    }\r\n    else if(this.state.item.touched.number && number.length === 0){\r\n      errors.number = 'Rule should not be null';\r\n      return errors;\r\n    }\r\n    else if(this.state.item.touched.ruleType && ruleType.length === 0){\r\n      errors.ruleType = 'Type should not be null';\r\n      return errors;\r\n    }\r\n    else if(this.state.item.touched.protocol && protocol.length === 0){\r\n      errors.protocol = 'Protocol should not be null';\r\n      return errors;\r\n    }\r\n    else if(this.state.item.touched.portRange && portRange.length === 0){\r\n      errors.portRange = 'Portrange should not be null';\r\n      return errors;\r\n    }\r\n    else if(this.state.item.touched.cidr && !cidrRegex({exact: true}).test(cidr)){\r\n      errors.cidr = 'Cidr should  be a cidr format';\r\n      return errors;\r\n    }\r\n    else if(this.state.item.touched.allow && allow.length === 0){\r\n      errors.allow = 'Deny/Allow should not be null';\r\n      return errors;\r\n    }\r\n    return errors;\r\n  }\r\n\r\n\r\n  render() {\r\n    const {item} = this.state;\r\n    const title = <h2>{item.id ? 'Edit rule' : 'Add rule'}</h2>;\r\n\r\n    const errors = this.validate(item.type, item.number, item.ruleType, item.protocol, item.portRange, item.cidr, item.allow);\r\n    const isDisabled = Object.keys(errors).some(x => errors[x]);\r\n    \r\n    const canc = FRT_BASE_URL + \"/nacl/\" + item.nacl.id + \"/rules\";\r\n\r\n    let nacl = null;\r\n    nacl = <FormGroup>\r\n            <Label for=\"naclId\">Nacl: {item.nacl.name}</Label>\r\n            <Input type=\"text\" name=\"naclId\" id=\"naclId\" value={item.nacl.id || ''} disabled=\"true\"/>\r\n          </FormGroup>;\r\n\r\n\r\n    return <div>\r\n      <AppNavbar/>\r\n      <Container>\r\n        {title}\r\n        <Form onSubmit={this.handleSubmit}>\r\n          \r\n          <FormGroup>\r\n            <Label for=\"type\">In/Out (*)</Label>\r\n            <Input type=\"select\" name=\"type\" id=\"type\" value={item.type || ''} onChange={this.handleChange} onBlur={this.handleBlur('type')} \r\n                 valid={errors.type === ''}\r\n                 invalid={errors.type !== ''}\r\n            >\r\n              <option value=\"\" disabled>Choose</option>\r\n              <option value=\"INBOUND\">INBOUND</option>\r\n              <option value=\"OUTBOUND\">OUTBOUND</option>\r\n            </Input>\r\n            <FormFeedback>{errors.type}</FormFeedback>\r\n          </FormGroup>\r\n          {nacl}\r\n        \r\n          <FormGroup>\r\n            <Label for=\"number\">Rule (*)</Label>\r\n            <Input type=\"text\" name=\"number\" id=\"number\" value={item.number || ''} placeholder=\"Enter rule\"\r\n                   onChange={this.handleChange} onBlur={this.handleBlur('number')} autoComplete=\"number\"\r\n                   valid={errors.number === ''}\r\n                   invalid={errors.number !== ''}\r\n            />\r\n           <FormFeedback>{errors.number}</FormFeedback>\r\n          </FormGroup>\r\n          <FormGroup>\r\n            <Label for=\"ruleType\">Type (*)</Label>\r\n            <Input type=\"select\" name=\"ruleType\" id=\"ruleType\" value={item.ruleType || ''} onChange={this.handleChange} onBlur={this.handleBlur('ruleType')} \r\n                 valid={errors.ruleType === ''}\r\n                 invalid={errors.ruleType !== ''}\r\n            >\r\n              <option value=\"\" disabled>Choose</option>\r\n              <option value=\"ruleType1\">ruleType1</option>\r\n              <option value=\"ruleType2\">ruleType2</option>\r\n            </Input>\r\n            <FormFeedback>{errors.ruleType}</FormFeedback>\r\n          </FormGroup>\r\n          <FormGroup>\r\n            <Label for=\"protocol\">Protocol (*)</Label>\r\n            <Input type=\"select\" name=\"protocol\" id=\"protocol\" value={item.protocol || ''} onChange={this.handleChange} onBlur={this.handleBlur('protocol')} \r\n                 valid={errors.protocol === ''}\r\n                 invalid={errors.protocol !== ''}\r\n            >\r\n              <option value=\"\" disabled>Choose</option>\r\n              <option value=\"protocol1\">protocol1</option>\r\n              <option value=\"protocol2\">protocol2</option>\r\n            </Input>\r\n            <FormFeedback>{errors.protocol}</FormFeedback>\r\n          </FormGroup>\r\n          <FormGroup>\r\n            <Label for=\"portRange\">Port Range (*)</Label>\r\n            <Input type=\"text\" name=\"portRange\" id=\"portRange\" value={item.portRange || ''} placeholder=\"Enter portRange\"\r\n                   onChange={this.handleChange} onBlur={this.handleBlur('portRange')} autoComplete=\"portRange\"\r\n                   valid={errors.portRange === ''}\r\n                   invalid={errors.portRange !== ''}\r\n            />\r\n           <FormFeedback>{errors.portRange}</FormFeedback>\r\n          </FormGroup>\r\n          <FormGroup>\r\n            <Label for=\"cidr\">Source/Destination (*)</Label>\r\n            <Input type=\"text\" name=\"cidr\" id=\"cidr\" value={item.cidr || ''} placeholder=\"Enter cidr\"\r\n                   onChange={this.handleChange} onBlur={this.handleBlur('cidr')} autoComplete=\"cidr\"\r\n                   valid={errors.cidr === ''}\r\n                   invalid={errors.cidr !== ''}\r\n            />\r\n           <FormFeedback>{errors.cidr}</FormFeedback>\r\n          </FormGroup>\r\n          <FormGroup>\r\n            <Label for=\"allow\">Deny/Allow (*)</Label>\r\n            <Input type=\"select\" name=\"allow\" id=\"allow\" value={item.allow || ''} onChange={this.handleChange} onBlur={this.handleBlur('allow')} \r\n                 valid={errors.allow === ''}\r\n                 invalid={errors.allow !== ''}\r\n            >\r\n              <option value=\"\" disabled>Choose</option>\r\n              <option value=\"Deny\">Deny</option>\r\n              <option value=\"Allow\">Allow</option>\r\n            </Input>\r\n            <FormFeedback>{errors.allow}</FormFeedback>\r\n          </FormGroup>\r\n          <FormGroup>\r\n            <Label for=\"text\">Description</Label>\r\n            <Input type=\"text\" name=\"text\" id=\"text\" value={item.text || ''}\r\n                   onChange={this.handleChange} autoComplete=\"text\"/>\r\n          </FormGroup>\r\n\r\n\r\n          <FormGroup>\r\n            <Button color=\"primary\" type=\"submit\" disabled={isDisabled}>Save</Button>{' '}\r\n            <Button color=\"secondary\" tag={Link} to={canc}>Cancel</Button>\r\n\r\n            \r\n\r\n          </FormGroup>\r\n        </Form>\r\n      </Container>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default withRouter(RuleEdit);"]},"metadata":{},"sourceType":"module"}